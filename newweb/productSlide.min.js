Site.productSlide={};(function(I,S,n){var w,J=-1,T,k,am,ai=null,f="",Z="",F,O,t,r,h,C,g=82;S.data={};S.dom={};function D(){var ao=[];ao.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">');ao.push('	<div class="f-contentBg J_contentBg"></div>');ao.push('	<div class="f-content J_content" id="fk-productSlideContent">');ao.push('		<div class="f-innerContent">');aa(ao);ao.push("		</div>");ao.push('		<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>');ao.push('		<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>');ao.push('		<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>');ao.push("	</div>");ao.push("</div>");return ao}function aa(ao){ao.push('<div class="f-multiContent J_multiContent">');H(ao);ao.push("</div>");ao.push('<div class="f-albumsContent J_albumsContent">');A(ao);ao.push("</div>")}function H(ao){ao.push('<div class="f-multiContent-left J_multiContentLeft">');G(ao);ao.push("</div>");ao.push('<div class="f-multiContent-right J_multiContentRight">');W(ao);ao.push("</div>")}function G(ao){ao.push('<div class="f-productPicContent J_productPicContent">');ao.push('	<div class="f-productImg J_productImg">');ao.push('		<div class="f-productImgLoading"></div>');ao.push("	</div>");ao.push('	<div class="f-productImgGroup J_productImgGroup" style="display:none;">');ao.push('		<div class="f-productImgGroupBg"></div>');ao.push('		<div class="f-imgListWrap J_imgListWrap">');ao.push("		</div>");ao.push('		<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>');ao.push('		<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>');ao.push("	</div>");ao.push("</div>");ao.push('<div class="f-shareContent J_shareContent">');ao.push("</div>")}function W(ao){ao.push('<div class="f-productDetailContent J_productDetailContent">');ao.push("</div>");ao.push('<div class="optionMsg"></div>');ao.push('<div class="f-productBuyContent J_productBuyContent">');ao.push("</div>")}function R(){if(!S.data.nowData){return""}var aN=[],aF=[],be=S.data,a1=be.nowData,bj=a1.propList||[],aO=typeof(a1.saleId)!="undefined"?a1.saleId:0,aC=typeof(a1.salePromotion)!="undefined"?a1.salePromotion:[],aV="g_stress mallPriceBig f-mallPriceWrap",aU="g_minor mallMarketPrice f-mallPriceWrap",ay="",bc="",au=false,ax=false,a3=false,a8="",ao="",aL,aD,bk,aX,a0,aE,bb,aG,aH;C=(O<100&&O>1);if(t){if("discount" in a1){O=a1.discount}else{O=100}C=(O<100&&O>1)}if(aC!=null||aC!=[]){au=true;ax=Q(bj);if(ax==true){a3=N(aC,false);if(a3){C=false;aF.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">');aF.push("<table>");aF.push("<tr>");aF.push("<td>");aF.push('<div class="showSaleTimeImg fk-showSaleTimeImg">');aF.push("</div>");aF.push("</td>");aF.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">');aF.push("</td>");aF.push("</tr>");aF.push("</table>");aF.push("</div>")}}}if(typeof(a1.salePromotion)!="undefined"){C=false}aL=a1.name;aG=bj.length;for(bb=0;bb<aG;bb++){aH=bj[bb];aD=aH.name;bk=aH.type;aX=aH.fileId;a0=aH.value||"";if(I.trim(a0).length<1){continue}if(bk==11&&C){ay=aU;bc=aV}else{if(bk==11&&!C){ay=aV}else{if(bk==12){ay=aU}else{ay=""}}}if(bk==11&&C){a8="";ao="J_mallPriceClass"}else{if(bk==11&&!C){a8="J_mallPriceClass"}else{a8=""}}aF.push('<div class="f-propContent '+a8+'">');aF.push('<div class="f-propName" title="'+aD+'" style="width:'+g+'px">'+aD+'<span class="f-colon">:</span></div>');aF.push('<div class="f-propValue '+ay+'">');if(bk==11){aF.push('	<span class="f-currencyVal">'+am.choiceCurrencyVal+"</span>");if(C){aF.push('	<span class="mallPrice J_realMallAmount">'+a0+"</span>");aF.push("	</div>");aF.push("</div>");aF.push('<div class="f-propContent '+ao+'">');aF.push('<div class="f-propName" title="'+aD+'" style="width:'+g+'px">'+r+'<span class="f-colon">:</span></div>');aF.push('<div class="f-propValue '+bc+'">');aF.push('<span class="f-currencyVal">'+am.choiceCurrencyVal+"</span>");var bg="";if(a0.indexOf("~")>=0){var ar=a0.split("~");var bf=parseFloat(ar[0])*O*0.01,aw=parseFloat(ar[1])*O*0.01;bg=bf.toFixed(2)+"~"+aw.toFixed(2)}else{bg=a0*O*0.01;bg=bg.toFixed(2)}aF.push('<span class="f-mallPrice mallPrice" id="realMallAmount">'+bg+"</span>");aF.push('<span class="fk-mallBuy-big memberPrice">'+h+"</span>")}else{aF.push('	<span class="mallPrice J_realMallAmount" id="realMallAmount">'+a0+"</span>")}}else{if(bk==12){aF.push('<span class="f-currencyVal">'+am.choiceCurrencyVal+"</span>");aF.push('<span class="mallPrice">'+a0+"</span>")}else{if(bk==13){aF.push('<span id="mallAmount">'+a0+"</span>")}else{if(bk==16){aF.push('<span id="mallWeight">'+a0+"</span>kg")}else{aF.push(a0)}}}}aF.push("</div>");aF.push("</div>")}if(am.mallOpen){if(am.mallShoppingOptions){if("showOptionList" in a1){var aK=a1.showOptionList||[],a7=a1.oldOptionsStr,aG=aK.length,aB=a1.optionsAmountList||[];if(C){I.each(aB,function(bl,bm){bm.oPrice=bm.oPrice*O*0.01})}for(var bb=0;bb<aG;bb++){var aq=aK[bb],aZ=aq.items,bh=aq.fieldKey,aR=0;if(a7){var aP=a7.split("_");for(var ba=0;ba<aP.length;ba++){if(bh==aP[ba]){aR=ba}}}var ap=aZ.length;if(ap>0){aF.push('<div class="f-propContent f-optionContent">');aF.push('<div class="f-propName" title="" style="width:'+g+'px">'+Fai.encodeHtml(aq.name)+'<span class="f-colon">:</span></div>');aF.push('<div class="propName" style="display:none;">'+Fai.encodeHtml(aq.name)+"</div>");aF.push('<div class="f-optionValue">');aF.push('<ul class="optionItemWrap" data="'+aq.fieldKey+'" type="'+aq.type+'">');for(var ba=0;ba<ap;ba++){var aI=aZ[ba];var aA=aI.i,aY=aI.v,bi=aI.path,aT=false;if(aB){for(var a9=0;a9<aB.length;a9++){var aW=aB[a9];var aQ=aW.t2;var a5;if("flag" in aW){a5=aW.flag}else{a5=1}var a6=aQ.split("_");if(a5==1&&aR<a6.length&&a6[aR]==aA){aT=true;break}}}if(aT){aF.push('<li class="optionItem">');if(bi){aF.push('<span class="img-n">'+Fai.encodeHtml(aY)+"</span>");var a2=aI.orgPic;if(a2){aF.push('<img class="i-img J-item J-item-img" src="'+bi+'" data="'+aA+'" _fk-org="'+a2+'" faiWidth="'+aI.faiWidth+'" faiHeight="'+aI.faiHeight+'"/>')}else{aF.push('<img class="i-img J-item J-item-img" src="'+bi+'" data="'+aA+'"/>')}}else{aF.push('<a class="J-item oItem" href="javascript:;" hidefocus="true" data="'+Fai.encodeHtmlAttr(aA)+'">');aF.push("<span>"+Fai.encodeHtml(aY)+"</span>");aF.push("</a>")}aF.push('</li">')}}aF.push("</ul>");aF.push("</div>");aF.push("</div>")}}}}if(!ai.hiddenBuybtn){var av=1;var aS="";var a4="";if(a1.limitAmount_mall){var at=0;var az=a1.productRestrictInfo;if(az){if(az.count){at=az.count}}var aJ=0,aM=a1.minAmount,bd=a1.maxAmount;aJ=bd-at;if(Fai.fkEval(aJ)<0){aJ=-1}if(aM>1&&bd!=0){a4="( "+LS.minAmount+" : "+aM+" ; "+LS.maxAmount+" : "+aJ+" )";aS=' _min="'+aM+'" _max="'+aJ+'" '}else{if(aM==1&&bd!=0){a4="("+LS.maxAmount+" : "+aJ+" )";aS='" _max="'+aJ+'" '}else{if(aM>1&&bd==0){a4="( "+LS.minAmount+" : "+aM+")";aS=' _min="'+aM+'" '}}}av=aM}aF.push('<div class="f-propContent f-countContent">');aF.push('<div class="f-propName" title="" style="width:'+g+'px">'+LS.amountNum+'<span class="f-colon">:</span></div>');aF.push('<div class="f-propValue f-countValue">');aF.push('<input id="cartbuyCountPdSlide" type="text" class="f-cartCountInput" onkeypress="javascript:return Fai.isNumberKey(event);" onchange="Site.mallBuyCountChange(\'PdSlide\')" value="'+av+'" '+aS+"/>");aF.push('<div class="f-buyCountBtn">');aF.push('<span id="buyCountDesPdSlide" class="f-countBtn mallJia disableMallJian" onclick="Site.desMallBuyCount(\'PdSlide\')"></span>');aF.push('<span id="buyCountIncPdSlide" class="f-countBtn mallJian" onclick="Site.incMallBuyCount(\'PdSlide\')"></span>');aF.push("</div>");aF.push('<span id="limitAmountDiv" class="f-limitAmountDiv" title="'+a4+'">');aF.push(a4);aF.push("</span>");aF.push("</div>");aF.push("</div>")}}aN.push('<div class="f-productNameContent">');aN.push('	<p class="f-productName">');if(ai.titleClick){aE=am.productDetailUrl+"?id="+be.id;aN.push('<a class="f-productTitle" href="'+aE+'" target="_blank">');aN.push(aL);aN.push("</a>")}else{aN.push(aL)}aN.push("	</p>");aN.push("</div>");aN.push('<div class="f-underlineContent">');aN.push('<div class="f-underline"></div>');aN.push("</div>");aN.push('<div class="f-propListContent">');aN.push(aF.join(""));aN.push("</div>");return aN.join("")}function Q(ap){var ao=false,aq;if(ap==null){return ao}len=ap.length;for(i=0;i<len;i++){aq=ap[i];type=aq.type;value=aq.value||"";if(I.trim(value).length<1){continue}if(type==11){ao=true;break}}return ao}function ab(){if(!am.mallOpen){return}if(ai.hiddenBuybtn){return}var aq=[],au=S.dom,ap=am.addCartText||"",ar=am.buyNowText||"",at=am.addCartClickEvent||"",ao=am.buyNowClickEvent||"";aq.push('<div class="f-buyContent">');aq.push('	<a href="javascript:;" onclick="'+at+'" hidefocus="true" class="fk-mall-addCart f-addCart"><span>'+ap+"</span></a>");aq.push('	<a href="javascript:;" onclick="'+ao+'" hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img">&nbsp;</span><span>'+ar+"</span></a>");aq.push("</div>");return aq.join("")}function A(ao){ao.push('<div class="f-albumsWrap J_albumsWrap">');ao.push("</div>");ao.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>');ao.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}function E(){var at=S.dom,av=S.data;at.productDetailContent.empty();at.productDetailContent.append(R());at.productBuyContent.empty();at.productBuyContent.append(ab());var ao=S.data.nowData;if(ao){var ay=ao.optionsAmountList,ar=ao.relateAmount,az=ao.mallPrice,ax=ao.productRestrictInfo,ap=ao.limitAmount_options,aB=ao.oldOptionsStr,aq=ao.newOptionsStr,aA=ao.limitAmount_mall,aw=ao.minAmount,au=ao.maxAmount;Site.initProductRestrict("PdSlide",aA,aw,au,ax);if(am.mallShoppingOptions&&typeof(ay)!="undefined"){if(!aB){aB="null"}var aC=ao.salePromotion;if(typeof(aC)!="undefined"){Site.salePromotionDetail.salePromotionParam=aC}Site.initProductOptions("PdSlide",ay,ar,az,ap,ax,aB,aq);Site.initOptionsStr(aB)}}if(Fai.top._manageMode){p()}}function an(){var ap=S.dom,ao=S.data;nowData=ao.nowData,multiContentRight=ap.multiContentRight,propList=nowData.propList||[],saleId=typeof(nowData.saleId)!="undefined"?nowData.saleId:0,salePromotion=typeof(nowData.salePromotion)!="undefined"?nowData.salePromotion:[],showSaleCountDownFlag=false,beginTime="",endTime="";am.saleShowType=1;if(salePromotion!=null&&salePromotion!=[]){showSaleMsg=true;findPriceFlag=Q(propList);if(findPriceFlag==true){showSaleCountDownFlag=N(salePromotion,true);if(!showSaleCountDownFlag){multiContentRight.find(".J_saleProTimeCount").remove();beginTime=salePromotion.beginTime;endTime=salePromotion.endTime;if(beginTime==null||beginTime==""||endTime==null||endTime==""){V(salePromotion)}}}}}function B(aE,aJ,ap,at){var au=[],aI=S.dom,aC=aI.multiContentRight,aB="",aK=LS.salePromotionBegin,aA=LS.salePromotionEnd,aw=0,ay="g_stress mallPriceBig",aG="g_minor mallMarketPrice",aq,aH,ar,av,ax,aD,az,ao,aF;if(ap==1){aB=aK;aw=aE}else{aB=aA;aw=aJ}if(ap=="2"){V(at)}clearInterval(am.saleCountTimeInterval);am.saleCountTimeInterval=setInterval(function(){aq=parseInt(aw/(3600*24));aH=parseInt(aw/3600)-(aq*24);ar=parseInt(aw/60)-(aq*24*60)-(aH*60);av=parseInt(aw%60);aw--;ax=Fai.format(aB,aq,aH,ar,av);aC.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+ax);if(aw<0){if(ap==1){aw=aJ;aB=aA;ap=2;V(at)}else{clearInterval(am.saleCountTimeInterval);aC.find(".J_saleRemove").remove();if(at.other.ruleData.s=="1"){aC.find(".J_newMallPriceClass").find(".f-propValue").addClass(ay);aC.find(".J_newMallPriceClass").find(".f-propValue").removeClass(aG);aC.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice")}}}},1000)}function N(av,at){var ap=false,ao=av.beginTime,aq=av.endTime,au=new Date().getTime()+am.timeDiff,ar,aw;if(typeof(ao)=="undefined"||ao==null||ao==""||typeof(aq)=="undefined"||aq==null||aq==""){return ap}ar=new Date(ao.replace(/-/g,"/")).getTime();aw=new Date(aq.replace(/-/g,"/")).getTime();if(ar>au||aw>au){ap=true}if(at){if(ar>au){B(parseInt((ar-au)/1000),parseInt((aw-ar)/1000),1,av)}else{if(aw>au){B(parseInt((ar-au)/1000),parseInt((aw-au)/1000),2,av)}}}return ap}function V(aw){if(am.saleShowType!="1"){return}am.saleShowType=2;var ax=[],ap=[],aH=S.dom,aF=aH.multiContentRight,aI="g_stress mallPriceBig f-mallPriceWrap",at="g_minor mallMarketPrice f-mallPriceWrap",aA,aB,ay,au,ao,aC,aJ=[],ar,aE="";if(typeof(aw)=="undefined"||aw==null||aw==""){return}var aD=aF.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(typeof(aD)=="undefined"||aD==null||aD==""){aD="#cf0000"}if(aw.saleType=="1"){au="";ao=parseFloat(aw.other.ruleData.d[0].m);aC=I(".J_mallPriceClass").find(".f-propName").attr("title");var az=I(".J_mallPriceClass").find(".mallPrice").html();if(az.indexOf("~")>0){var av=az.split("~");var aq=parseFloat(av[0]);if(isNaN(aq)){aq=0}aJ.push(aq);aq=parseFloat(av[1]);if(isNaN(aq)){aq=0}aJ.push(aq)}else{var aq=parseFloat(az);if(isNaN(aq)){aq=0}aJ.push(aq)}for(var aG=0;aG<aJ.length;aG++){ar=0;if(aw.other.ruleData.s=="1"){au=Fai.format(LS.salePromotionDisCount,ao);ar=aJ[aG]*(ao/10)}else{au=Fai.format(LS.salePromotionLapse,ao);ar=aJ[aG]-ao}if(isNaN(ar)||ar<0){ar=0}if(aG>0){aE+="~"}aE+=ar.toFixed(2)+""}I(".J_mallPriceClass").find(".f-propValue").addClass("fk-saleRelative");ap.push('<div class="f-propContent J_newMallPriceClass">');ap.push('<div class="f-propName" title="'+aC+'" style="width:'+g+'px">'+aC+'<span class="f-colon">:</span></div>');ap.push('<div class="f-propValue '+at+'">');ap.push('<span class="f-currencyVal">'+am.choiceCurrencyVal+"</span>");ap.push('<span class="mallPrice">'+az+"</span>");ap.push("</div>");ap.push("</div>");I(".J_mallPriceClass").before(ap.join(""));I(".J_mallPriceClass").find(".f-propName").html(LS.promotionPrice+"<span class='f-colon'>:</span>");I(".J_mallPriceClass").find(".mallPrice").html(aE);I(".J_mallPriceClass").find(".f-propName").attr("title",LS.promotionPrice);I(".J_mallPriceClass").addClass("J_saleRemove");ax.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>');ax.push('<td class="fk-saleTdSty1">');ax.push('<div  class="f-trangle " style="border-bottom: 5px solid '+aD+';">');ax.push("</div>");ax.push("</td>");ax.push('<td class="fk-saleTdSty2">');ax.push('<div class="f-rect" style="background-color:'+aD+';"  title="'+aw.name+'">');ax.push(au);ax.push("</div>");ax.push("</td>");ax.push("</tr></table></span>");I(".J_mallPriceClass").find(".f-propValue").append(ax.join(""))}else{aA=aw.other.ruleData.d.length;aB=aA*20+(aA-1)*12+"px";ax.push('<div class="f-propContent J_saleRemove">');ax.push('<div class="f-propName" title="'+LS.salePromotionName+'" style="height:'+aB+";width:"+g+'px">'+LS.salePromotionName+'<span class="f-colon">:</span></div>');ax.push('<div class="f-propValue fk-saleRelative" style="height:'+aB+'">');ax.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+aw.name+'">');for(var aG=0;aG<aA;aG++){if(aG!=0){ay="top:"+(aG*30)+"px"}else{ay="top:0"}ax.push('<span class="fk-saleAbsolute" style="'+ay+'">');ax.push('<span class="saleFullReBg" style="margin:0;background-color:'+aD+';">');ax.push(Fai.format(LS.salePromotionOnlyFullReduce));ax.push("</span>");ax.push('<span style="margin:0;color:'+aD+'">');ax.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,aw.other.ruleData.d[aG].m,aw.other.ruleData.d[aG].n));ax.push("</span>");ax.push("</span>")}ax.push("</span>");ax.push("	</div>");ax.push("</div>");aF.find(".J_mallPriceClass").after(ax.join(""))}Site.showSalePromotionDl();if(Fai.top._manageMode){p()}}function u(aq){var ar=S.data,ap={src:"",width:-1,height:-1},ao={};I.extend(ao,ap,aq);L(ao)}function ad(){var ar=S.data,aq=ar.nowData,at,ap,ao;if(aq){at=aq.picPath;ap=aq.picwidth;ao=aq.picHeight;u({src:at,width:ap,height:ao})}}function L(au){var ar=S.dom,ap=ar.productImg,ao=au.src||"",aw=390,ax=390,at=new Image(),av=ap.find(".J_nowImg"),aq,ay;if(I.trim(ao).length<1){Fai.ing("找不到该图片",true)}if(av.length>0){if(av.attr("src")==I.trim(ao)){return}}ap.empty().append('<div class="f-productImgLoading"></div>');if(T&&T.onload){T.onload=function(){}}at.onload=function(){var aE=false,aD=false,aA="",aC=[],aB=[],az,aF;aq=at.width;az=aq;ay=at.height;aF=ay;if(aq>=ay&&aq>aw){aE=true;az=aw}else{if(ay>ax){aD=true;aF=ax}}if(aE){aA+="width:"+az+"px;"}if(aD){aA+="height:"+aF+"px;"}if(aE&&!aD){aF=aw*at.height/at.width}if(!aE&&aD){az=ax*at.width/at.height}if(!ai.picZoom&&!ai.picPopupPD){aB.push('	<a class="f-imgClick" href="'+(am.productDetailUrl+"?id="+S.data.id)+'" target="_blank" title="点击进入产品详情页面">');aB.push('		<img class="J_nowImg " src="'+ao+'" style="'+aA+'" />');aB.push("	</a>")}else{aB.push('	<img class="J_nowImg " src="'+ao+'" style="'+aA+'" />')}aC.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">');aC.push("	<tr>");aC.push("		<td>");aC.push(aB.join(""));aC.push("		</td>");aC.push("	</tr>");aC.push("</table>");if(ai.picZoom){aB=[];aB.push(aC.join(""));aC=[];aC.push('<div class="cloud-zoom f-imgWrap" href="'+ao+'">');aC.push(aB.join(""));aC.push("</div>")}ap.empty();ap.append(aC.join(""));if(ai.picZoom){av=ap.find(".cloud-zoom");av.attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+aw+", maxHeight:"+ax+',position:"inside"');av.CloudZoom({imageHeight:ay,imageWidth:aq});if(!ai.picPopupPD){setTimeout(function(){ap.find(".mousetrap").append('<a href="'+(am.productDetailUrl+"?id="+S.data.id)+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看产品详情"></a>')},30)}}};T=at;setTimeout(function(){at.src=ao},50)}function b(aq){var aw=[],ax=[],aA=68,ay=0,av=S.data,aq=av.id,aC=false,aD="",aB="",ap=0,at=0,ao,ar,au,az;az=w.length;for(au=0;au<az;au++){if(w[au].id==aq){ao=w[au];aC=true;break}}if(!aC){return""}ar=ao.picPathList||[];az=ar.length;for(au=0;au<az;au++){aD=ar[au].thumbPath;aB=ar[au].path;ap=ar[au].picWidth;at=ar[au].picHeight;ax.push("<li>");ax.push('	<a href="javascript:;" class="J_pic" onclick="return false;" path="'+aB+'" picwidth="'+ap+'" picheight="'+at+'" >');ax.push('		<img src="'+aD+'" style="display: block; width:60px; height:60px;" />');ax.push("	</a>");ax.push("</li>");ay+=aA}aw.push('			<div class="f-imgListOuter J_imgListOuter">');aw.push('				<ul class="f-imgList J_imgList" style="width:'+ay+'px;" _num="0">');aw.push(ax.join(""));aw.push("				</ul>");aw.push("			</div>");return aw.join("")}function a(){var aq=S.dom,ap=S.data,ao=aq.groupBtn;ao.left.removeClass("f-BtnDisabled f-BtnEnabled");ao.right.removeClass("f-BtnDisabled f-BtnEnabled");aq.imgListWrap.empty();aq.imgListWrap.append(b(ap.id));aq.imgListOuter=aq.imgListWrap.find(".J_imgListOuter");aq.imgList=aq.imgListWrap.find(".J_imgList");aq.imgList.find(".J_pic").hover(function(){u({src:I(this).attr("path"),width:I(this).attr("picwidth"),height:I(this).attr("picheight")})})}function v(){var at=[],au=[],ao=90,ax=0,aq,aw,ap;if(w&&w.length>0){for(var ar=0,av=w.length;ar<av;ar++){aq=w[ar];aw=aq.picThumbPath||"";ap=aq.id;au.push("<li>");au.push('	<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+ap+'">');au.push('		<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+ap+'" _id="'+ap+'">');au.push('			<img src="'+aw+'" style="display: block; width:80px; height:80px;" />');au.push("		</a>");au.push('		<div class="f-albumsImgTip"></div>');au.push("	</div>");au.push("</li>");ax+=ao}at.push('<div class="f-albumsOuter J_albumsOuter">');at.push('	<ul class="f-albums J_albums" style="width:'+ax+'px;" _num="0">');at.push(au.join(""));at.push("	</ul>");at.push("</div>")}return at.join("")}function m(){var ap=S.dom,ao;ap.albumsWrap.empty();ap.albumsWrap.append(v());ap.albumsOuter=ap.albumsWrap.find(".J_albumsOuter");ap.albums=ap.albumsWrap.find(".J_albums");ap.albumsImgWrap=ap.albums.find(".J_albumsImgWrap");ao=ap.albums.children().first().outerWidth()||90,ap.albums.find(".J_albumsImg").click(function(){var ar=I(this).attr("_id"),aq=c(ar);e(ar)});z({index:J,visibleNum:2});ak()}function o(){var ap=S.dom,ao=S.data;ap.albumsImgWrap.removeClass("f-albumsImgWrap-selected");ap.albumsImgWrap.filter(".J_albumsImgWrap"+ao.id).addClass("f-albumsImgWrap-selected")}function P(ap){var ao=S.dom,at=ao.albums,ax=ao.albumsOuter,aq=ao.albumsBtn,ar=0,au={content:at,contentOuter:ax,button:aq,scrollRow:true,visibleNum:2},aw={},av=ap.changeProduct||false;I.extend(aw,au,ap);if(aw.scrollRow){y(aw)}else{ar=al(aw);z({index:ar,visibleNum:2});x(ar)}Y(aw);I("#fk-productSlidePanel").find(".optionMsg").hide()}function af(at){var av=S.dom,au=av.imgList,ao=av.imgListOuter,ar=av.groupBtn,aq={content:au,contentOuter:ao,button:ar,scrollRow:true},ap={};I.extend(ap,aq,at);y(ap);Y(ap)}function y(at){var ax=at.content,ap=ax.children(),av=ap.length,aw=ap.first().outerWidth(),au=at.contentOuter.width(),aB=parseInt(au/aw),aA=at.visibleNum||0,az=aB-aA,aq=parseInt((av-aA)/az),ao=parseInt(ax.attr("_num"))||0,ar=0,ay=at.direction;if(av<=aB){aq=0}else{if((aq*az-av)>=0){aq-=1}}if(ay){ar=ao+1;if(ar>aq){ar=0;ax.stop(true).animate({left:"0"});ax.attr("_num",ar)}else{ax.stop(true).animate({left:-(ar*az*aw)+"px"});ax.attr("_num",ar)}}else{ar=ao-1;if(ar<0){ar=aq}ax.stop(true).animate({left:-(ar*az*aw)+"px"});ax.attr("_num",ar)}}function z(au){var aq=S.dom,az=aq.albums,ap=az.children(),ax=ap.length,ay=ap.first().outerWidth(),av=aq.albumsOuter.width(),aD=parseInt(av/ay),aC=au.visibleNum||0,aB=aD-aC,ar=0,ao=parseInt(az.attr("_num"))||0,at=0,aA=0,aw=au.index;if(aC>parseInt(aD/2)){aC=parseInt(aD/2);aB=aD-aC}if(ax>aD&&aw>=aB){ar=parseInt((ax-aC)/aB);if((ar*aB-ax)>=0){ar-=1}at=parseInt((aw-aC)/aB);aA=parseInt(aw/aB)}else{ar=0;at=0;aA=0}if(at>ar){at=0}else{if(at<0){at=ar}}if(ao==at||ao==aA){return}az.stop(true).animate({left:-(at*aB*ay)+"px"});az.attr("_num",at)}function al(av){var az=av.content,aq=az.children(),ax=aq.length,ay=aq.first().outerWidth(),aw=av.contentOuter.width(),ap=0,ao=J,aA=av.direction,aC=0,aB=1,at=av.cycle||false,ar,au;ar=ax-(ax%aB);if(aA){au=ao+aB;if(au<ar){aC=au}else{if(ao>ar){aC=0}else{if(ar==ax){aC=ar-1;if(at){aC=0}return aC}if(ar==ao){aC=ar;return aC}aC=ar}}}else{au=ao-aB;if(au>ap){aC=au}else{if(ao<ap){aC=0}else{aC=ap;if(ap==ao){if(at){aC=ax-1}return aC}}}}return aC}function Y(at){var ay=at.content,ap=ay.children(),aw=ap.length,ax=ap.first().outerWidth(),au=at.contentOuter.width(),av=at.button,aB=parseInt(au/ax),aA=at.visibleNum||0,az=aB-aA,aq=parseInt((aw-aA)/az),ao=parseInt(ay.attr("_num"))||0,ar=0;if(aw<=aB){aq=0}else{if((aq*az-aw)>=0){aq-=1}}ar=ao+1;if(ar>aq){ar=0;av.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{av.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}ar=ao-1;if(ar<0){av.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{av.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}}function ak(){var av=S.dom,au=av.albums,ao=av.albumsOuter,at=av.albumsBtn,ar=0,aq={content:au,contentOuter:ao,button:at,scrollRow:true},ap={};I.extend(ap,aq,{scrollRow:true});Y(ap)}function ae(){var au=S.dom,at=au.imgList,ao=au.imgListOuter,ar=au.groupBtn,aq={content:at,contentOuter:ao,button:ar,scrollRow:true},ap={};I.extend(ap,aq,{scrollRow:true});Y(ap)}function ah(aq){var ar=[],ap,ao;ar.push(aq.qsUrl);ar.push("&cmd=list");I.ajax({type:"get",cache:false,url:Site.genAjaxUrl("productSlide_h.jsp")+ar.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(av){var at=I.parseJSON(av),au=S.data;if(at.success){w=at.list;ai=at.setInfo;am=at.data;Z=am.css;O=am.levelDiscount;r=am.memberPrice;t=am.proIndepDisc;h=am.memberPriceLabel;g=ai.prop2;if(Fai.top._manageMode){F=at.itemList}if(w.length<1){Fai.ing("没有产品信息");return}ap=new Date().getTime();ao=am.svrTimeLong;am.timeDiff=ao-ap;am.saleShowType=1;am.saleCountTimeInterval="";if(am.productId==-1){au.id=w[0].id}else{au.id=am.productId}J=c(au.id);if(J==-1){Fai.ing("没有该产品信息");return}else{au.nowData=w[J]}q()}else{Fai.ing("获取数据失败",false)}}})}function l(){if(!ai.shareShow){return}S.dom.shareContent.addClass("f-shareContentIniting");clearTimeout(k);k=setTimeout(function(){var ao=[];ao.push("cmd=share");ao.push("&id="+S.data.id);ao.push("&browserTitle="+Fai.top.document.title);I.ajax({type:"post",url:Site.genAjaxUrl("productSlide_h.jsp"),data:ao.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",false)},success:function(ar){var aq=I.parseJSON(ar),at=S.dom,ap="";if(aq.success){ap=aq.content||""}else{Fai.ing("获取数据失败",false)}at.shareContent.removeClass("f-shareContentIniting");at.shareContent.empty().append(ap)}})},300)}function c(ar){var ap=-1,aq,ao;if(w&&w.length>0){ao=w.length;for(aq=0;aq<ao;aq++){if(w[aq].id==ar){ap=aq;break}}}return ap}function x(ao){if(J==ao){return}if(w&&w[ao]){e(w[ao].id)}}function e(aq){var ao=-1,ap=S.data;ao=c(aq);if(ao==-1){Fai.ing("没有该产品信息");return}else{if(ao==J){return}}J=ao;ap.id=parseInt(aq);ap.nowData=w[J];d()}function d(){S.dom.imgList=null;ad();E();an();a();l();o();setTimeout(function(){ag()},50)}function M(ap){var ao=new Image();ao.src=ap}function ag(){var at=S.data,ar=at.nowData,aq=ar.picPathList||[],ap,ao;ao=aq.length;for(ap=0;ap<ao;ap++){M(aq[ap].path)}}function aj(){var ao=S.dom;ao.productDetailContent.empty();ao.productBuyContent.empty();ao.productImg.empty();ao.imgListWrap.empty();ao.albumsWrap.empty();ao.shareContent.empty()}function U(){w=null;J=-1;T=null;k=null;am=null;ai=null;O=null;t=null;r=null;h=null;C=false;S.data={};g=82}function j(){var ar=S.dom,ao=ar.panel,au=ar.panelBtn,aq=ar.groupBtn,ap=ar.albumsBtn,at;au.close.click(function(){X()});au.left.click(function(){P({scrollRow:false,direction:false,cycle:true,changeProduct:true})});au.right.click(function(){P({scrollRow:false,direction:true,cycle:true,changeProduct:true})});ap.left.click(function(){P({scrollRow:true,direction:false})});ap.right.click(function(){P({scrollRow:true,direction:true})});aq.left.click(function(){af({scrollRow:true,direction:false})});aq.right.click(function(){af({scrollRow:true,direction:true})});ar.contentBg.click(function(){X()});ar.productPicContent.hover(function(){if(!ar.imgList){return}var av=ar.imgList.children();if(av&&av.length<2){return}at=setTimeout(function(){ar.productImgGroup.slideDown("normal",function(){ae()})},250)},function(){clearTimeout(at);ar.productImgGroup.slideUp()});ar.content.mouseleave(function(){clearTimeout(at);ar.productImgGroup.slideUp()})}function K(ao){var ap=S.dom;ap.panel=Fai.top.$("#fk-productSlidePanel");ap.content=ap.panel.find(".J_content");ap.contentBg=ap.panel.find(".J_contentBg");ap.panelBtn={};ap.panelBtn.left=ap.panel.find(".J_turnLeft");ap.panelBtn.right=ap.panel.find(".J_turnRight");ap.panelBtn.close=ap.panel.find(".J_close");ap.multiContent=ap.panel.find(".J_multiContent");ap.albumsContent=ap.panel.find(".J_albumsContent");ap.multiContentLeft=ap.multiContent.find(".J_multiContentLeft");ap.multiContentRight=ap.multiContent.find(".J_multiContentRight");ap.productDetailContent=ap.multiContentRight.find(".J_productDetailContent");ap.productBuyContent=ap.multiContentRight.find(".J_productBuyContent");ap.shareContent=ap.multiContentLeft.find(".J_shareContent");ap.productPicContent=ap.multiContentLeft.find(".J_productPicContent");ap.productImg=ap.multiContentLeft.find(".J_productImg");ap.productImgGroup=ap.multiContentLeft.find(".J_productImgGroup");ap.imgListWrap=ap.multiContentLeft.find(".J_imgListWrap");ap.groupBtn={};ap.groupBtn.left=ap.multiContentLeft.find(".J_groupLeft");ap.groupBtn.right=ap.multiContentLeft.find(".J_groupRight");ap.albumsWrap=ap.albumsContent.find(".J_albumsWrap");ap.albumsBtn={};ap.albumsBtn.left=ap.albumsContent.find(".J_albumsLeft");ap.albumsBtn.right=ap.albumsContent.find(".J_albumsRight");if(typeof ao.func=="function"){setTimeout(function(){ao.func.apply(S,arguments)},30)}}function q(){ac({func:function(){var ap=S.dom;if(ap.panel&&ap.panel.length>0){if(ap.panel.is(":hidden")){ap.panel.show()}}else{Fai.top.$("#fk-productSlidePanel").show()}ad();E();an();a();m();l();o();setTimeout(function(){ag()},50)}});if(Fai.top._manageMode&&F&&F.length>0){var ao=S.dom.content;ao.off("mousemove.productSlide").on("mousemove.productSlide",function(){Site.addEditLayer("fk-productSlideContent",F,100,{extCls:"fk-productSlideEditLayer"})});ao.off("mouseleave.productSlide").on("mouseleave.productSlide",function(){Site.removeEditLayer("fk-productSlideContent")})}}function X(){var ao=S.dom;if(Fai.top._manageMode&&F){Site.removeEditLayer("fk-productSlideContent")}ao.panel&&ao.panel.hide();U();S.dom={};f="";Z="";F=null;Fai.top.$("#fk-productSlidePanel").remove()}S.init=function(ao){X();Fai.top.$("body").append(D().join(""));f=ao;ah({qsUrl:ao});K({func:j})};S.refresh=function(){aj();U();ah({qsUrl:f})};function ac(ao){if(!Site.checkCssLoad(Z)&&I.trim(Z).length>0){Site.demandLoadCss(Z,function(){if(typeof ao.func=="function"){ao.func.apply(S,arguments)}})}else{if(typeof ao.func=="function"){ao.func.apply(S,arguments)}}}function p(){I(".f-propName").attr("class","f-propName paramResize");s();I(".f-propName,.u-paramResize-e,.u-paramResize-w").hover(function(){I(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"})},function(){I(".f-propName").css("border","1px dashed transparent")})}function s(){var ao=I(".f-propListContent ").find(".f-propContent").find(".paramResize");if(ao.length<1){return}ao.each(function(){var aw=I(this),ap=Fai.isIE8()?I(document):I(window),ay,av,ar=I(this),au,at={},aA;if(aw.hasClass("paramResize")){aw.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+I(aw).outerHeight()+"px;z-index:999'></div></div>");aw.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+I(aw).outerHeight()+"px;z-index:999'></div></div>");I(".u-paramResize-e,.u-paramResize-w").css("cursor","e-resize")}ay=I(aw).prev();av=I(aw).next();if(!av.hasClass("u-paramResize-e")||!ay.hasClass("u-paramResize-w")){return}ay.off("mousedown.fi").on("mousedown.fi",az);av.off("mousedown.fi").on("mousedown.fi",az);function az(aB){aB=aB||window.event;at.x=aB.pageX;if(I(this).hasClass("u-paramResize-w")){at.dir="w";at.ptb=parseInt(ar.css("width"))}else{if(I(this).hasClass("u-paramResize-e")){at.dir="e";at.ptb=parseInt(ar.css("width"))}}au=I("#dockTip").show().css({left:"-1000px;",top:"-1000px"});ap.off("mousemove.fi").on("mousemove.fi",aq);ap.off("mouseup.fi").on("mouseup.fi",ax);aB.preventDefault()}function aq(aE){I("body").css("cursor","e-resize");I(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"});aE=aE||window.event;var aF={x:aE.pageX},aC,aH,aB=1,aD=250,aG="";if(at.dir=="w"){aC=at.x-aF.x;aH=at.ptb+aC;aH=aH>aB?aH:aB;aH=aH>aD?aD:aH;aH=Math.round(aH);aG="宽度:"}else{if(at.dir=="e"){aC=aF.x-at.x;aH=at.ptb+aC;aH=aH>aB?aH:aB;aH=aH>aD?aD:aH;aH=Math.round(aH);aG="宽度:"}}aA=aH;I(".f-propName").css({width:aH+"px"});au.html(aG+aH).css({left:aE.pageX-28,top:aE.pageY-40});aE.preventDefault()}function ax(aC){I("body").css("cursor","");I(".f-propName").css("border","1px dashed transparent");aC=aC||window.event;at.dir="";ap.off("mousemove.fi");ap.off("mouseup.fi");au.hide();at={};var aB=ai.id;var aE="cmd=set&id="+aB+"&style=19&prop0=1&prop2="+aA;var aD=Site.genAjaxUrl("module_h.jsp");Fai.ing("正在保存……",false);I.ajax({type:"post",url:aD,data:aE,error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aG){var aF=I.parseJSON(aG);if(aF.success){Fai.ing("修改宽度成功",true);g=aA}else{Fai.ing(aF.msg,false);I(".J_productDetailContent").find(".f-propContent").find(".paramResize").css("width",g)}}});aC.preventDefault()}})}})(jQuery,Site.productSlide);